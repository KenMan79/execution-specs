:mod:`ethereum.frontier.state`
==============================

.. py:module:: ethereum.frontier.state

State
^^^^^

.. contents:: Table of Contents
    :backlinks: none
    :local:

Introduction
------------

The state contains all information that is preserved between transactions.

It consists of a main account trie and storage tries for each contract.


Module Contents
---------------

Classes
~~~~~~~

.. autoapisummary::

   ethereum.frontier.state.State



Functions
~~~~~~~~~

.. autoapisummary::
   :nosignatures:

   ethereum.frontier.state.get_account
   ethereum.frontier.state.set_account
   ethereum.frontier.state.destroy_account
   ethereum.frontier.state.get_storage
   ethereum.frontier.state.set_storage
   ethereum.frontier.state.storage_root
   ethereum.frontier.state.state_root
   ethereum.frontier.state.modify_state
   ethereum.frontier.state.move_ether



Module Details
---------------

State
~~~~~


Contains all information that is preserved between transactions.


.. class:: State

   .. py:attribute:: _main_trie
      :annotation: :ethereum.frontier.trie.Trie[ethereum.frontier.eth_types.Account]

      

   .. py:attribute:: _storage_tries
      :annotation: :Dict[ethereum.frontier.eth_types.Address, ethereum.frontier.trie.Trie[ethereum.base_types.U256]]

      



get_account
~~~~~~~~~~~


.. function:: get_account(state: State, address: ethereum.frontier.eth_types.Address) -> ethereum.frontier.eth_types.Account
   :noindexentry:

   Get the `Account` object at an address. Returns `EMPTY_ACCOUNT` if there
   is no account at the address.

   :param state: The state
   :type state: `State`
   :param address: Address to lookup.
   :type address: `Address`

   :returns: **account** -- Account at address.
   :rtype: `Account`




.. undocinclude:: /../src/ethereum/frontier/state.py
   :language: python
   :lines: 37-56

set_account
~~~~~~~~~~~


.. function:: set_account(state: State, address: ethereum.frontier.eth_types.Address, account: ethereum.frontier.eth_types.Account) -> None
   :noindexentry:

   Set the `Account` object at an address. Setting to `EMPTY_ACCOUNT` deletes
   the account (but not its storage, see `destroy_account()`).

   :param state: The state
   :type state: `State`
   :param address: Address to set.
   :type address: `Address`
   :param account: Account to set at address.
   :type account: `Account`




.. undocinclude:: /../src/ethereum/frontier/state.py
   :language: python
   :lines: 59-73

destroy_account
~~~~~~~~~~~~~~~


.. function:: destroy_account(state: State, address: ethereum.frontier.eth_types.Address) -> None
   :noindexentry:

   Completely remove the account at `address` and all of its storage.

   This function is made available exclusively for the `SELFDESTRUCT`
   opcode. It is expected that `SELFDESTRUCT` will be disabled in a future
   hardfork and this function will be removed.

   :param state: The state
   :type state: `State`
   :param address: Address of account to destroy.
   :type address: `Address`




.. undocinclude:: /../src/ethereum/frontier/state.py
   :language: python
   :lines: 76-92

get_storage
~~~~~~~~~~~


.. function:: get_storage(state: State, address: ethereum.frontier.eth_types.Address, key: ethereum.base_types.Bytes) -> ethereum.base_types.U256
   :noindexentry:

   Get a value at a storage key on an account. Returns `U256(0)` if the
   storage key has not been set previously.

   :param state: The state
   :type state: `State`
   :param address: Address of the account.
   :type address: `Address`
   :param key: Key to lookup.
   :type key: `Bytes`

   :returns: **value** -- Value at the key.
   :rtype: `U256`




.. undocinclude:: /../src/ethereum/frontier/state.py
   :language: python
   :lines: 95-121

set_storage
~~~~~~~~~~~


.. function:: set_storage(state: State, address: ethereum.frontier.eth_types.Address, key: ethereum.base_types.Bytes, value: ethereum.base_types.U256) -> None
   :noindexentry:

   Set a value at a storage key on an account. Setting to `U256(0)` deletes
   the key.

   :param state: The state
   :type state: `State`
   :param address: Address of the account.
   :type address: `Address`
   :param key: Key to set.
   :type key: `Bytes`
   :param value: Value to set at the key.
   :type value: `U256`




.. undocinclude:: /../src/ethereum/frontier/state.py
   :language: python
   :lines: 124-148

storage_root
~~~~~~~~~~~~


.. function:: storage_root(state: State, address: ethereum.frontier.eth_types.Address) -> ethereum.base_types.Bytes
   :noindexentry:

   Calculate the storage root of an account.

   :param state: The state
   :type state: `State`
   :param address: Address of the account.
   :type address: `Address`

   :returns: **root** -- Storage root of the account.
   :rtype: `Bytes`




.. undocinclude:: /../src/ethereum/frontier/state.py
   :language: python
   :lines: 151-170

state_root
~~~~~~~~~~


.. function:: state_root(state: State) -> ethereum.base_types.Bytes
   :noindexentry:

   Calculate the state root.

   :param state: The state
   :type state: `State`

   :returns: **root** -- The state root.
   :rtype: `Bytes`




.. undocinclude:: /../src/ethereum/frontier/state.py
   :language: python
   :lines: 173-191

modify_state
~~~~~~~~~~~~


.. function:: modify_state(state: State, address: ethereum.frontier.eth_types.Address, f: Callable[[ethereum.frontier.eth_types.Account], None]) -> None
   :noindexentry:

   Modify an `Account` in the `State`.




.. undocinclude:: /../src/ethereum/frontier/state.py
   :language: python
   :lines: 194-200

move_ether
~~~~~~~~~~


.. function:: move_ether(state: State, sender_address: ethereum.frontier.eth_types.Address, recipient_address: ethereum.frontier.eth_types.Address, amount: ethereum.base_types.U256) -> None
   :noindexentry:

   Move funds between accounts.




.. undocinclude:: /../src/ethereum/frontier/state.py
   :language: python
   :lines: 203-221
